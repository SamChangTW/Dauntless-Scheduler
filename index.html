<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dauntless Scheduler v2.7.1 — CloudLink Fix</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="icons/icon-192.png">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<meta name="theme-color" content="#111418"/>
<link rel="stylesheet" href="style.css"/>
</head>
<body>
<header class="bar">
  <div class="brand"><span class="logo">DS</span>
    <div class="title">Dauntless Scheduler <small>v2.7.1 — CloudLink Fix</small></div>
  </div>
  <div class="source" id="dataSource">資料源：<b>雲端</b></div>
</header>
<main class="container">
  <section class="console"><h3>Friday Console</h3><pre id="console">v2.7.1 boot…</pre></section>
  <section class="actions">
    <div class="pill ok">🟢 已排賽程</div>
    <div class="pill warn">🔴 需避開（日）</div>
    <button id="btnOpenForm" class="btn">📝 建立／編輯賽程</button>
    <button id="btnAvoid" class="btn ghost">🔎 查詢需避開（日）</button>
    <button id="btnReload" class="btn ghost">↻ 重新載入</button>
  </section>
  <section class="cards">
    <div class="card"><div class="label">本季週日數</div><div class="value" id="weeksThis">—</div></div>
    <div class="card"><div class="label">本季已排</div><div class="value" id="countThis">—</div></div>
    <div class="card"><div class="label">次季已排</div><div class="value" id="countNext">—</div></div>
    <div class="card"><div class="label">需避開（總）</div><div class="value" id="countAvoid">—</div></div>
  </section>
  <section class="list"><h3>本季（日）</h3><div id="listThis" class="slots"></div></section>
  <section class="list"><h3>次季（日）</h3><div id="listNext" class="slots"></div></section>
</main>
<dialog id="dlgForm">
  <form method="dialog" class="form">
    <h3>建立／編輯賽程</h3>
    <label>日期（YYYY-MM-DD）<input id="f_date" type="text" placeholder="2025-11-16" required></label>
    <label>聯盟（例如：TSAA）<input id="f_league" type="text" placeholder="TSAA"></label>
    <label>狀態（scheduled/cancelled/postponed）<input id="f_status" type="text" placeholder="scheduled"></label>
    <label>備註<input id="f_note" type="text" placeholder="可留空"></label>
    <menu><button id="btnSubmit" value="submit" class="btn">儲存（寫入雲端）</button><button id="btnClose" value="cancel" class="btn ghost">取消</button></menu>
    <p class="help">若顯示權限錯誤，請確認 Apps Script 部署為「任何人」；試過仍失敗，按 <b>↻ 重新載入</b>。</p>
  </form>
</dialog>
<footer class="footer">© 2025 Dauntless Scheduler — CloudLink v2.7.1</footer>
<script src="app.js"></script>
</body></html>
